<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>15-472-s24: A1 - Scene Graph</title>
<style>
/* feel free to style your report in a fancier way! */

@import url('https://fonts.googleapis.com/css2?family=Quicksand:wght@300;400;700&Anonymous+Pro&display=swap');

html {
	background:#505055;
}

body {
	font-family: 'Quicksand', sans-serif;
	color:#000;
	background:#eeeee8;
	font-size:15px;
	margin: 1em auto 50vh auto;
	padding: 1em 2em 1em 2em;
	max-width:45em;
	border-radius:4px;
	box-shadow:0 0 10px #0008;
}

accent {
	font-style:italic;
	font-weight: 700;
}

h1 { font-size: 20px; font-weight: 700; }
h2 { font-size: 16px; font-weight: 700; }
h3 { font-size: 16px; font-weight: 400; }
h4 { font-size: 14px; font-weight: 400; }

h1, h2, h3, h4 {
	margin: 15px 0 0 -10px;
}

p {
	margin: 5px 0 0 0;
}

.subtitle {
	display:block;
	font-size:16px;
	font-weight:400;
}

.placeholder {
	color:#800;
	font-style:italic;
}

kbd {
	display:inline-block;
	background:#ccc;
	color:#444;
	font-style:normal;
	font-weight:700;
	border-radius:8px;
	padding:1px 6px;
	margin:1px;
	border:1.5px solid #aaa;
}

code {
	display:inline-block;
	font-family: 'Anonymous Pro', monospace;
	background: #222;
	color:#fff;
	border-radius:4px;
	padding:2px 4px;
	margin:1px;
}

code var {
	color:#ef5;
	font-style:italic;
}

.atag {
	font-family: 'Calistoga', serif;
	font-size:90%;
	color:#000;
	background:#e17dcd;

	display:inline-block;
	padding:1px 4px;
	border-radius: 4px;
	line-height:120%;
}
.atag:before {
	content:'Â»';
}
.atag.extra {
	background:#c6aff8;
}
.atag.creative {
	background:linear-gradient(0.35turn, #fcacff, #f9ab93, #76a1e4, #20953d);
}

.codeblock {
	font-family: 'Anonymous Pro', monospace;
	background: #222;
	color:#fff;
	border-radius:4px;
	padding:2px 4px;
	margin:1px;
	white-space: pre-wrap;
}

</style>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<h1>A1: Scene Viewer
<span class="subtitle">by Jingxuan Chen (jingxua4)</span>
</h1>


<h2>Overview</h2>
<p>
<!-- Summarize, in about one paragraph, your approach to the scene graph assignment. -->
This scene viewer builds off of the <a href="https://naak.love/">nakluV</a> tutorial
by replacing portions of the code where meshes, materials, lighting and cameras were hardcoded
with information read from a .s72 file.
The heavylifting of scene loading was done with the help of <a href="https://github.com/15-472/s72-loader">s72-loader</a>,
which generates a scene graph and stores relevant information in a struct, making scene data much easier to work with.
</p>

<h3>Code Structure</h3>
<p>
<!-- How did you structure your code? -->
The bulk of the viewer's functionality is implemented in <code>SceneViewer.cpp</code>, which is a renamed and extended version
of the <code>Tutorial.cpp</code> in nakluV. Scene loading is done when the viewer is constructed, and the resulting <code>S72</code>
struct is stored as a member of <code>SceneViewer</code> to be traversed later during rendering.
</p>
<!-- What's cool about it? Are there parts you weren't able to complete? -->
<p>
As part of <span class="atag extra">A1x-fast</span>, I later defined another intermediate data structure
<code>std::vector&lt;Node&gt; scene_graph</code> within <code>SceneViewer</code>
that preprocesses the scene graph generated by s72-loader to store certain static computations in order to reduce the workload during render.
</p>

<h3>Challenges</h3>
<p>
I ran out of time to complete everythin required for A1, so I've neglected some of the culling tasks.
Firstly, I noticed that my culling implementation has some errors: for example we can observe in the video below showcasing
culling on <code>sphereflake.s72</code> that there are quite a lot of false positives. However, since I discovered this at 2am on the day
the assignment is due, I've elected not to fix it before the deadline.
I will also be skipping the showcase of difficult cases for culling, and the scene comparisons for when culling does or does not improve performance.
</p>
<p>
Additionally, halfway through my implementation, I noticed texture loading appeared to have a data race problem where
<code>color-check.s72</code> was occasionally rendering wrong despite no changes to the executable.
This problem proceeded to disappear after I continued implementing unrelated features.
Due to time constraints I have yet to find the root cause of this problem.
</p>
<p>
Ideally I would have also set up proper automated testing code with command line arguments,
but I was short on time so I defaulted to the faster, more hacky implementation for now to simply get results.
</p>

<h2>My Animation <span class="atag creative">A1-create</span></h2>

<p>
I made a simple animation of a rotating klein bottle like shape:
</p>
<video autoplay loop width="100%">
<!--
  you can use the 'video' element to show your code running
  Learn more at:
    https://developer.mozilla.org/en-US/docs/Web/HTML/Element/video

  Example: put the video file in a path near this .html
  <source src="path/to/video" type="video/mp4" />
-->
<source src="../animation/animation.mp4" type="video/mp4" />
</video>
<p>
The mesh was created in Blender with the help of a few modifiers and the animation is basic keyframing.
The scene was then exported to .s72 using <code>export-s72.py</code> provided by <a href="https://github.com/15-472/s72/tree/main/exporters/blender">s72</a>.
</p>

<h2>Using the Scene Viewer</h2>
<p>
To build the executable, one needs to follow the set up instructions in <a href="https://naak.love/step0/">nakluV step0</a>
to download and set up a C++ compiler, Node.js, GLFW and the Vulkan SDK. Running <code>node <var>Maekfile.js</var></code> in the <code>code</code> directory
should then successfully generate the executable.
</p>
<h3>Command-line Arguments</h3>

<p>
The following are command-line arguments accepted by <code>bin/viewer</code>:
</p>

<ul>
<li>
	<code>--scene <var>scene.s72</var></code> <accent>-- required --</accent>
	load scene from <code><var>scene.s72</var></code>
</li>
<li>
	<code>--camera <var>camera_name</var></code> <accent>-- optional --</accent>
	starts viewing with the scene camera named <code><var>camera_name</var></code>. 
	Starts with the first scene camera loaded in code (or the user camera if there are no scene cameras) by default.
</li>
<li>
	<code>--culling <var>none|frustum</var></code> <accent>-- optional --</accent>
	toggles culling. <code><var>none</var></code> by default.
</li>
<li>
	<code>--physical-device <var>device_name</var></code> <accent>-- optional --</accent>
	runs the viewer on the named physical device and aborts if the device is not found.
	The viewer guesses the best physical device to use among those available by default.
</li>
<li>
	<code>--drawing-size <var>w h</var></code> <accent>-- optional --</accent>
	sets the initial size of the drawable part of the window in physical pixels.
</li>
<li>
	<code>--headless</code> <accent>-- optional --</accent>
	does not create a window and instead renders to an off-screen buffer; reads events from stdin.
	Current available events are as follows:
	<ul>
		<li><code>AVAILABLE <var>dt</var> <var>frame.ppm</var></code> steps the viewer by given <code><var>dt</var></code> and renders one frame.
			If <code><var>frame.ppm</var></code> is provided, the viewer also saves the rendered frame to <code><var>frame.ppm</var></code>.
		</li>
	</ul>
</li>
</ul>

<h3>Controls</h3>

<p>
The following are keyboard and mouse controls used to control the viewer when run interactively:
</p>

<ul>
<li>
	<kbd>1</kbd> switches to scene camera mode.
</li> <li>
	<kbd>TAB</kbd> cycles through scene cameras when in scene camera mode.
</li> <li>
	<kbd>2</kbd> switches to user camera mode.
</li> <li>
	<kbd>3</kbd> switches to debug camera mode.
</li><li>
	<kbd>LMB+Drag</kbd> orbits the camera when in user/debug camera mode.
</li><li>
	<kbd>SHIFT+LMB+Drag</kbd> pans the camera when in user/debug camera mode.
</li><li>
	<kbd>Scroll</kbd> zooms the camera when in user/debug camera mode.
</li><li>
	<kbd>SPACE</kbd> plays/pauses the scene animation.
</li><li>
	<kbd>R</kbd> resets to the first frame of the scene animation.
</li><li>
	<kbd>RIGHTARROW</kbd> steps the scene animation forward by one frame when paused.
</li>
</ul>


<h2>Evidence</h2>

<!-- <p class="placeholder">
The purpose of this section is to get you to think critically about your code by providing evidence sufficient to demonstrate to course staff that it works.
These thoughts may also help you improve the code as you work on it in A2 and beyond.
</p> -->


<h3>Scene Loading <span class="atag">A1-load</span></h3>

<p>
My loading code simply calls <code>S72::load</code> to convert the input .s72 file into a <code>S72</code> struct.
I then loop through the relevant vectors in the struct to store mesh data in <code>object_vertices</code>,
each materials as a texture stored in <code>textures</code>, and store a list of camera names in <code>scene_cameras</code>
to facilitate camera switching.</p>
<p>
After <span class="atag extra">A1x-fast</span>, the above operations (except loading the initial .s72 file) were all moved into the
<code>SceneViewer::precompute_scene</code> function. In addition, I now also traverse the scene graph to
precompute the transforms of static nodes as well as discarding empty nodes to create <code>scene_graph</code>,
which is a flatter graph that is more efficient to traverse.
</p>

<h3>Scene Display <span class="atag">A1-show</span></h3>
<p>
Within <code>SceneViewer::update</code>, I traverse my internal scene graph representation
to calculate <code>WORLD_FROM_LOCAL</code> matrices, add mesh instances to <code>object_instances</code>,
update the active camera's <code>CLIP_FROM_WORLD</code> if applicable, and store lighting information.
These information are then used to render the scene.
</p>

<figure>
<img src="images/show-texture-loading.png" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;">
<figcaption>
Texture loading test scene
</figcaption>
</figure>

<figure>
<img src="images/show-scene.png" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;">
<figcaption>
Render of one of the provided sample scenes
</figcaption>
</figure>


<h3>Scene Display &mdash; Interaction <span class="atag">A1-show</span></h3>

<p>
Information of each camera are stored separately, with the user and debug camera being stored as separate
instances of <code>OrbitCamera</code> within <code>SceneViewer</code>, while scene cameras are
indirectly stored within the <code>S72</code> struct and accessed during scene graph traversal.
I use <code>camera_mode</code> and <code>scene_camera_index</code> to keep track of which camera is currently active,
which allows me to compute the correct <code>CLIP_FROM_WORLD</code> for rendering.
</p>

<video autoplay loop width="100%">
<source src="videos/show-interaction.mp4" type="video/mp4" />
</video>

<h3>Frustum culling <span class="atag">A1-cull</span></h3>

<p>
Object space axis-aligned bounding boxes are precomputed for each mesh in <code>precompute_scene</code> and stored in
by simply taking the min and max over all vertices of the mesh. These are stored in an unordered map <code>object_bounding_boxes</code>
for easy access later. The actual culling happens within <code>traverse_scene_graph</code> as each mesh instance is considered,
while the culling logic itself is packaged into a separate function <code>frustum_check</code>.
</p>
<p>
The box-frustum test was implemented via separating axis, where the box and frustum are first transformed to world
space coordinates (the former by multiplying by <code>WORLD_FROM_LOCAL</code>, and the latter by multiplying by the inverse of <code>CLIP_FROM_WORLD</code>)
before being projected onto all possible directions formed from the cross product between any two edges.
If for any direction the intervals formed by the box and frustum don't overlap, then it means that the box doesn't
overlap the frustum and can be culled. Otherwise, the box is kept for rendering.
</p>

<video autoplay loop width="100%">
<source src="videos/culling-showcase.mp4" type="video/mp4" />
</video>
<!-- 
<p class="placeholder">
Also include evidence that your culling works on any particularly difficult cases you may have thought up (include .s72 / .b72 files as appropriate).
</p>

<p class="placeholder">
Demonstrate a scene and camera angle where your culling code improves performance; and demonstrate one where it does not improve performance.
Include screen shots and make a chart or graph of median frame times as evidence for the performance impact.
</p> -->


<h3>Animating the scene <span class="atag">A1-move</span></h3>

<p>
Keyframes are indirectly stored within the <code>S72</code> struct as part of the <code>drivers</code> vector.
During scene loading, I store references to the relevant drivers for each animated node which are then accessed
at the start of <code>SceneViewer::traverse_scene_graph</code> to update transformations for the relevant node.
</p>

<video autoplay loop width="100%">
<source src="videos/animation-showcase.mp4" type="video/mp4" />
</video>


<h3>Bottleneck Hunting <span class="atag">A1-test</span></h3>

<p>
My baseline scene consists of a camera pointing at a single, simple cube with 8 vertices. This can be easily created in Blender.
</p>
<p>
The relevant .*72 files included in the <code>report/</code> folder are <code>simple-cube.s72</code> and <code>simple-cube.Cube.pnTt.b72</code>
</p>
<figure>
<img src="images/simple-cube.png" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;">
<figcaption>
Baseline scene as viewed through the scene camera.
</figcaption>
</figure>

<p>
To demonstrate a CPU bottleneck, I added 10000 cubes outside of the camera frustum to the baseline scene.
This scene was generated by directly modifying the .s72 file of the baseline scene, using a short python script
to duplicate the relevant node information in a temporary text file before copy-pasting it into the .s72 file.
Since all 10000 cubes will be culled before rendering, the GPU workload should be exactly the same as the baseline,
while CPU workload will be different due to the additional culling.
</p>
<p>
The relevant .*72 files included in the <code>report/</code> folder are <code>simple-cube-culling.s72</code> and <code>simple-cube.Cube.pnTt.b72</code>.
</p>
<figure>
<img src="images/10000-cubes.png" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;">
<figcaption>
Scene with 10000 cubes added outside of the camera frustum, as viewed through the debug camera.
To make scene generation more convenient, the 10000 cubes all had the same transform.
</figcaption>
</figure>

<p>
To demonstrate a GPU bottleneck, I subdivided the cube in the baseline scene 10 times by applying a subdivision surface
modifier in Blender, resulting in a single cube with about 6.3 million vertices.
Apart from the initial construction of the viewer, the CPU workload should be exactly the same as
only a single instance is drawn in both cases, and the CPU only binds pointers to the vertex buffers, which shouldn't
be affect by the size of the buffer. GPU workload however will be different as a vastly different number of vertices will be processed.
</p>
<p>
The relevant .*72 files included in the <code>report/</code> folder are <code>cube.s72</code> and <code>cube.Cube.pnTt.b72</code>.
</p>
<figure>
<img src="images/subdivided-cube.png" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;">
<figcaption>
Scene with the cube subdivided 10 times, as viewed through the scene camera.
</figcaption>
</figure>

<p>
The scenes were tested in headless mode, each rendering for 500 frames. Timing between calls to <code>SceneViewer::render</code> are logged
and compared.
The following results were obtained after all changes made for <span class="atag extra">A1x-fast</span>.
The device used was a Macbook Pro running on Apple M1 Max with 64GB of memory.
</p>

<figure>
<canvas id="cpu-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const frameNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500];
	const baseline_times = [0.913375, 1.20029, 0.333292, 0.338583, 0.261792, 0.257583, 0.280416, 0.26675, 0.224875, 0.258208, 0.225375, 0.29425, 0.193666, 0.242, 0.250083, 0.243959, 0.212625, 1.15425, 0.361833, 0.482334, 0.234375, 0.219084, 0.156042, 0.20475, 0.155584, 0.185708, 0.159709, 0.155041, 0.258875, 0.155958, 0.161291, 0.15875, 0.155416, 0.155625, 0.157084, 0.166791, 0.159125, 0.130083, 0.182542, 0.151833, 0.155209, 0.16125, 0.152375, 0.1805, 0.169375, 0.179541, 0.200208, 0.222292, 0.293709, 0.158958, 0.184916, 0.150834, 0.153625, 0.154792, 0.185208, 0.17125, 0.206792, 0.142959, 0.210167, 0.163208, 0.257333, 0.147625, 0.228208, 0.145291, 0.176334, 0.171916, 0.1665, 0.250291, 0.147, 0.198541, 0.273542, 0.155792, 0.18625, 0.168833, 0.160792, 0.207834, 0.147583, 0.230667, 0.166916, 0.160375, 0.203833, 0.158875, 0.187834, 0.150917, 0.168625, 0.155708, 0.158666, 0.137625, 0.190042, 0.151209, 0.169333, 0.194792, 0.153125, 0.194917, 0.184042, 0.216375, 0.178542, 0.257709, 0.187542, 0.240708, 0.249666, 0.3265, 1.22188, 0.140042, 0.235292, 0.148833, 0.172833, 0.122459, 0.1935, 0.141833, 0.185291, 0.16225, 0.157625, 0.160375, 0.159084, 0.220667, 0.14775, 0.1665, 0.140292, 0.173833, 0.170125, 0.1625, 0.149084, 0.1835, 0.158875, 0.15275, 0.171209, 0.150542, 0.154291, 0.156042, 0.16025, 0.132875, 0.223042, 0.146875, 0.243833, 0.171208, 0.251959, 0.276958, 0.178, 0.197125, 0.140834, 0.167125, 0.163583, 0.135958, 0.198666, 0.152791, 0.142917, 0.169292, 0.167125, 0.146459, 0.165208, 0.187709, 0.154792, 0.163791, 0.154833, 0.161042, 0.17, 0.158917, 0.192083, 0.150708, 0.153084, 0.177208, 0.152417, 0.173708, 0.1605, 0.173917, 0.166333, 0.162666, 0.16175, 0.143583, 0.165834, 0.158292, 0.15575, 0.154292, 0.188459, 0.17075, 0.220458, 0.192375, 0.199292, 0.234375, 0.163917, 0.220083, 0.163, 0.272334, 0.120625, 0.209792, 0.156834, 0.17725, 0.18475, 0.186417, 1.63233, 0.188458, 0.262125, 0.1485, 0.161291, 0.185375, 0.150541, 0.258292, 0.102417, 0.246833, 0.164834, 0.163417, 0.224167, 0.1725, 0.15, 0.160084, 0.151166, 0.154791, 0.149125, 0.172875, 0.230709, 0.110291, 0.273709, 0.136583, 0.168708, 0.170458, 0.152042, 0.162292, 0.180583, 0.125334, 0.25925, 0.177542, 0.167167, 0.256459, 0.164458, 0.116834, 0.178792, 0.154791, 0.180541, 0.153833, 0.166375, 0.1375, 0.173792, 0.158417, 0.154333, 0.149833, 0.162875, 0.155542, 0.158, 0.165334, 0.158583, 0.148584, 0.161083, 0.15175, 0.173042, 0.154333, 0.157458, 0.153, 0.149, 0.157958, 0.15775, 0.149666, 0.154375, 0.15475, 0.161667, 0.154333, 0.151708, 0.151875, 0.149459, 0.158083, 0.149084, 0.150708, 0.155458, 0.157, 0.149541, 0.160917, 0.1485, 0.166084, 0.144875, 0.187208, 0.165458, 0.152542, 0.169791, 0.150292, 0.160667, 0.160125, 0.16175, 0.148625, 0.165708, 0.165417, 0.301375, 0.849958, 0.113167, 0.231459, 0.174625, 0.155667, 0.140208, 0.169125, 0.133542, 0.16425, 0.15575, 0.151167, 0.15375, 0.152125, 0.159667, 0.156792, 0.15575, 0.158959, 0.15925, 0.151959, 0.209, 0.167292, 0.168791, 0.147625, 0.162916, 0.150333, 0.158958, 0.158958, 0.149167, 0.176958, 0.159833, 0.161708, 0.159834, 0.166583, 0.154333, 0.175667, 0.147083, 0.159875, 0.253833, 0.16875, 0.130083, 0.203167, 0.149084, 0.151792, 0.154083, 0.146541, 0.153792, 0.146375, 0.1595, 0.157459, 0.153292, 0.146208, 0.15025, 0.147166, 0.149625, 0.152041, 0.142333, 0.149084, 0.152666, 0.151708, 0.153917, 0.183917, 0.125042, 0.148291, 0.150375, 0.14775, 0.154458, 0.18725, 0.1145, 0.168708, 0.152333, 0.150542, 0.147084, 0.158792, 0.164458, 0.147417, 0.1545, 0.135584, 0.148458, 0.155333, 0.157041, 0.157167, 0.152167, 0.15, 0.171541, 0.161, 0.170625, 0.184833, 0.170667, 0.190875, 0.265917, 0.160458, 0.251833, 0.20325, 0.259125, 0.214, 0.219583, 1.0225, 0.212542, 0.253875, 0.160084, 0.164083, 0.154833, 0.163542, 0.292, 0.484292, 0.139833, 0.156125, 0.156583, 0.15775, 0.149459, 0.157875, 0.166, 0.280042, 0.114292, 0.189042, 0.161541, 0.208875, 0.122125, 0.147417, 0.15425, 0.14775, 0.150875, 0.14575, 0.220709, 0.1205, 0.217583, 0.154333, 0.154167, 0.177834, 0.162, 0.13625, 0.174375, 0.188166, 0.202625, 0.171459, 0.208125, 0.189542, 0.179125, 0.194542, 0.20025, 0.19325, 0.23875, 0.175292, 0.20925, 0.178833, 0.194708, 0.199917, 0.192791, 0.165541, 0.2065, 0.202166, 0.19975, 0.172209, 0.204625, 0.158583, 0.189584, 0.165833, 0.137458, 0.178708, 0.133, 0.155625, 0.149417, 0.152125, 0.151959, 0.1485, 0.146625, 0.149583, 0.149125, 0.20625, 0.105292, 0.158625, 0.141208, 0.15525, 0.141125, 0.148833, 0.143666, 0.145417, 0.150292, 0.160666, 0.147209, 0.157916, 0.14675, 0.163959, 0.141, 0.152833, 0.161459, 1.12488, 0.117583, 0.240833, 0.184375, 0.163084, 0.183917, 0.194792, 0.158042, 0.215666, 0.104834, 0.153833, 0.146417, 0.144667, 0.156041, 0.232875, 0.110167, 0.177917, 0.153666, 0.153625, 0.226, 0.2225, 0.103208, 0.166416, 0.156291, 0.154, 0.149083, 0.147667, 0.149542, 0.152916, 0.146125, 0.156667, 0.143333, 2.37913];
	const cpu_bottleneck_times = [1.93492, 1.79229, 1.43258, 1.437, 1.31617, 1.36675, 1.30288, 1.2575, 1.29383, 1.36817, 1.36, 1.31188, 1.35263, 1.27171, 1.33842, 1.38833, 1.35508, 1.68608, 1.45596, 1.41267, 1.43404, 1.40275, 1.34725, 1.32854, 1.32733, 1.29371, 1.387, 1.52313, 1.37292, 1.28233, 1.28125, 1.27312, 1.28967, 1.3275, 1.42667, 1.37887, 1.30867, 1.302, 1.36942, 1.37921, 1.46487, 1.37546, 1.33733, 1.40954, 1.36762, 1.48954, 1.42621, 1.34517, 1.34113, 1.32429, 1.31442, 1.3395, 1.34492, 1.35946, 1.31262, 1.33308, 1.40442, 1.44525, 1.49496, 1.53292, 1.48367, 1.31558, 1.35133, 1.50817, 1.45592, 1.39275, 1.39196, 1.33925, 1.45042, 1.43783, 1.38071, 1.37892, 1.47929, 1.33617, 1.30875, 1.43854, 1.33425, 1.45404, 1.47708, 1.39371, 1.3745, 1.44733, 1.47242, 1.42471, 1.30438, 1.332, 1.64496, 1.37471, 1.46954, 1.48575, 1.66842, 1.79175, 1.48896, 1.61579, 1.47783, 1.49846, 1.52112, 3.43413, 1.59142, 1.48958, 1.5505, 1.50212, 1.55633, 1.51942, 1.46892, 1.45371, 1.68037, 1.47537, 1.38875, 1.70412, 1.4415, 1.47412, 1.54275, 1.41467, 1.52525, 1.37908, 1.37412, 1.294, 1.32779, 1.36279, 1.26104, 1.26537, 1.31608, 1.25058, 1.44592, 1.41208, 1.47133, 1.37008, 1.38421, 1.3705, 1.437, 1.43875, 1.46358, 1.36042, 1.5205, 1.45092, 2.30987, 1.47392, 1.49946, 1.42925, 1.3335, 1.35525, 1.34, 1.47708, 1.33458, 1.291, 1.2775, 1.31867, 1.43308, 1.45058, 1.41525, 1.35987, 1.35508, 1.34379, 1.50879, 1.39242, 1.39617, 1.33438, 1.31779, 1.424, 1.45496, 1.41846, 1.36629, 1.43058, 1.31871, 1.29342, 1.30004, 1.34763, 1.29692, 1.24542, 1.31017, 1.25467, 1.26238, 1.31042, 1.30142, 1.26129, 1.309, 1.24679, 1.30017, 1.31117, 1.37383, 1.31137, 1.30546, 1.33992, 1.36621, 1.34546, 1.34262, 1.32425, 1.33667, 1.26375, 1.237, 1.34796, 1.30737, 1.23779, 1.27363, 1.23554, 1.25329, 1.27687, 1.29633, 1.36437, 1.32292, 1.26046, 1.27392, 1.24654, 1.35404, 1.3045, 1.33712, 1.3295, 1.3025, 1.28838, 1.32346, 1.32062, 1.35479, 1.26963, 1.26567, 1.2995, 1.31117, 1.3, 1.32979, 1.23967, 1.26683, 1.23025, 1.23258, 1.27896, 1.29358, 1.38808, 1.28029, 1.24917, 1.25867, 1.24258, 1.35975, 1.33742, 1.27954, 1.25404, 1.30075, 1.24737, 1.32629, 1.38942, 1.38271, 1.51654, 1.443, 1.37267, 1.43733, 1.41912, 1.42233, 1.47425, 1.47558, 1.5665, 1.42088, 1.66012, 1.68942, 1.71679, 1.5625, 1.54154, 1.44554, 1.47604, 1.56292, 1.41379, 1.35204, 1.61013, 1.37867, 1.31638, 1.32817, 1.33421, 1.32125, 1.44013, 1.35225, 1.30858, 1.27179, 1.25604, 1.33067, 1.49354, 1.51212, 1.43579, 1.34279, 1.35421, 1.35854, 1.35704, 1.36488, 1.32596, 1.37525, 1.37717, 1.38725, 1.42925, 1.38267, 1.46138, 1.39192, 2.02825, 1.52258, 1.42625, 1.27675, 1.26, 1.29725, 1.29733, 1.34471, 1.419, 1.48808, 1.4025, 1.30267, 1.46496, 1.49596, 1.47542, 1.39912, 1.32304, 1.31508, 1.32662, 1.38904, 1.40592, 1.4285, 1.42271, 1.38933, 1.44421, 1.39188, 1.38304, 1.46471, 1.31217, 1.28838, 1.29708, 1.26537, 1.28046, 1.34837, 1.3185, 1.2595, 1.27546, 1.27137, 1.30308, 1.38733, 1.36475, 1.36308, 1.40829, 1.37896, 1.36042, 1.50012, 1.34758, 1.31937, 1.29033, 1.28371, 1.2595, 1.26625, 1.29454, 1.25092, 1.267, 1.26492, 1.24579, 1.27388, 1.29308, 1.30137, 1.29825, 1.30696, 1.26121, 1.25808, 1.35696, 1.36396, 1.27225, 1.27054, 1.31042, 1.37063, 1.34142, 1.30867, 1.32662, 1.27229, 1.28912, 1.28808, 1.24517, 1.26963, 1.26033, 1.26408, 1.23992, 1.27204, 1.25171, 1.30529, 1.35396, 1.36379, 1.32712, 1.37871, 1.29675, 1.42671, 1.5015, 1.35125, 1.36688, 1.38954, 1.40908, 1.35079, 1.40912, 1.38, 1.28612, 1.26817, 1.36883, 1.54017, 1.49404, 1.443, 1.45708, 1.629, 1.86992, 2.28458, 1.52346, 1.47921, 1.62025, 1.60862, 1.88542, 1.47821, 1.36354, 1.54929, 1.63929, 1.57537, 1.49325, 1.40138, 1.62475, 1.35142, 1.41346, 1.53396, 1.43008, 1.34458, 1.39325, 1.53275, 1.432, 1.37771, 1.28304, 1.33325, 1.26913, 1.26879, 1.30604, 1.40217, 1.39446, 1.35837, 1.32192, 1.39854, 1.45317, 1.75017, 1.48967, 1.55342, 1.54438, 1.45917, 1.48838, 1.47958, 1.42962, 1.429, 1.46692, 1.44917, 1.35238, 1.38783, 1.36317, 1.43196, 1.54767, 1.393, 1.44712, 1.38833, 1.32225, 1.25696, 1.26483, 1.27787, 1.28188, 1.31329, 1.29933, 1.33487, 1.25321, 1.29358, 1.35217, 1.319, 1.31421, 1.50637, 1.45871, 1.36746, 1.40638, 1.41492, 1.37675, 1.38046, 1.32638, 1.26829, 1.30746, 1.36996, 1.30175, 1.40525, 1.32512, 1.36833, 1.32604, 1.37408, 1.3305, 1.40712, 1.29621, 1.297, 1.28863, 1.33733, 1.36608, 1.27075, 1.24042, 1.26408, 1.24488, 1.27642, 1.29346, 1.32221, 1.308, 1.34433, 1.27904, 1.28933, 1.35062, 1.2515, 1.27825, 1.26021, 3.35896];
	
	new Chart("cpu-ex", {
		type: "line",
		data: {
			labels: frameNumbers,
			datasets: [
				{ label: "baseline", data: baseline_times, pointStyle:false },
				{ label: "10000 cubes", data: cpu_bottleneck_times, pointStyle:false },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "CPU Bottleneck" }, //show a chart title
				legend: { display: true, onClick:()=>{} }, //show legend but don't allow interacting
			},
			scales: {
				y:{
					min:0, //having y-axis start at zero provides better relative view of data
					title: { display:true, text:"frame time (ms)" },
				},
				x:{
					title: { display:true, text:"frame number" },
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<figure>
<canvas id="gpu-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const frameNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500];
	const baseline_times = [0.913375, 1.20029, 0.333292, 0.338583, 0.261792, 0.257583, 0.280416, 0.26675, 0.224875, 0.258208, 0.225375, 0.29425, 0.193666, 0.242, 0.250083, 0.243959, 0.212625, 1.15425, 0.361833, 0.482334, 0.234375, 0.219084, 0.156042, 0.20475, 0.155584, 0.185708, 0.159709, 0.155041, 0.258875, 0.155958, 0.161291, 0.15875, 0.155416, 0.155625, 0.157084, 0.166791, 0.159125, 0.130083, 0.182542, 0.151833, 0.155209, 0.16125, 0.152375, 0.1805, 0.169375, 0.179541, 0.200208, 0.222292, 0.293709, 0.158958, 0.184916, 0.150834, 0.153625, 0.154792, 0.185208, 0.17125, 0.206792, 0.142959, 0.210167, 0.163208, 0.257333, 0.147625, 0.228208, 0.145291, 0.176334, 0.171916, 0.1665, 0.250291, 0.147, 0.198541, 0.273542, 0.155792, 0.18625, 0.168833, 0.160792, 0.207834, 0.147583, 0.230667, 0.166916, 0.160375, 0.203833, 0.158875, 0.187834, 0.150917, 0.168625, 0.155708, 0.158666, 0.137625, 0.190042, 0.151209, 0.169333, 0.194792, 0.153125, 0.194917, 0.184042, 0.216375, 0.178542, 0.257709, 0.187542, 0.240708, 0.249666, 0.3265, 1.22188, 0.140042, 0.235292, 0.148833, 0.172833, 0.122459, 0.1935, 0.141833, 0.185291, 0.16225, 0.157625, 0.160375, 0.159084, 0.220667, 0.14775, 0.1665, 0.140292, 0.173833, 0.170125, 0.1625, 0.149084, 0.1835, 0.158875, 0.15275, 0.171209, 0.150542, 0.154291, 0.156042, 0.16025, 0.132875, 0.223042, 0.146875, 0.243833, 0.171208, 0.251959, 0.276958, 0.178, 0.197125, 0.140834, 0.167125, 0.163583, 0.135958, 0.198666, 0.152791, 0.142917, 0.169292, 0.167125, 0.146459, 0.165208, 0.187709, 0.154792, 0.163791, 0.154833, 0.161042, 0.17, 0.158917, 0.192083, 0.150708, 0.153084, 0.177208, 0.152417, 0.173708, 0.1605, 0.173917, 0.166333, 0.162666, 0.16175, 0.143583, 0.165834, 0.158292, 0.15575, 0.154292, 0.188459, 0.17075, 0.220458, 0.192375, 0.199292, 0.234375, 0.163917, 0.220083, 0.163, 0.272334, 0.120625, 0.209792, 0.156834, 0.17725, 0.18475, 0.186417, 1.63233, 0.188458, 0.262125, 0.1485, 0.161291, 0.185375, 0.150541, 0.258292, 0.102417, 0.246833, 0.164834, 0.163417, 0.224167, 0.1725, 0.15, 0.160084, 0.151166, 0.154791, 0.149125, 0.172875, 0.230709, 0.110291, 0.273709, 0.136583, 0.168708, 0.170458, 0.152042, 0.162292, 0.180583, 0.125334, 0.25925, 0.177542, 0.167167, 0.256459, 0.164458, 0.116834, 0.178792, 0.154791, 0.180541, 0.153833, 0.166375, 0.1375, 0.173792, 0.158417, 0.154333, 0.149833, 0.162875, 0.155542, 0.158, 0.165334, 0.158583, 0.148584, 0.161083, 0.15175, 0.173042, 0.154333, 0.157458, 0.153, 0.149, 0.157958, 0.15775, 0.149666, 0.154375, 0.15475, 0.161667, 0.154333, 0.151708, 0.151875, 0.149459, 0.158083, 0.149084, 0.150708, 0.155458, 0.157, 0.149541, 0.160917, 0.1485, 0.166084, 0.144875, 0.187208, 0.165458, 0.152542, 0.169791, 0.150292, 0.160667, 0.160125, 0.16175, 0.148625, 0.165708, 0.165417, 0.301375, 0.849958, 0.113167, 0.231459, 0.174625, 0.155667, 0.140208, 0.169125, 0.133542, 0.16425, 0.15575, 0.151167, 0.15375, 0.152125, 0.159667, 0.156792, 0.15575, 0.158959, 0.15925, 0.151959, 0.209, 0.167292, 0.168791, 0.147625, 0.162916, 0.150333, 0.158958, 0.158958, 0.149167, 0.176958, 0.159833, 0.161708, 0.159834, 0.166583, 0.154333, 0.175667, 0.147083, 0.159875, 0.253833, 0.16875, 0.130083, 0.203167, 0.149084, 0.151792, 0.154083, 0.146541, 0.153792, 0.146375, 0.1595, 0.157459, 0.153292, 0.146208, 0.15025, 0.147166, 0.149625, 0.152041, 0.142333, 0.149084, 0.152666, 0.151708, 0.153917, 0.183917, 0.125042, 0.148291, 0.150375, 0.14775, 0.154458, 0.18725, 0.1145, 0.168708, 0.152333, 0.150542, 0.147084, 0.158792, 0.164458, 0.147417, 0.1545, 0.135584, 0.148458, 0.155333, 0.157041, 0.157167, 0.152167, 0.15, 0.171541, 0.161, 0.170625, 0.184833, 0.170667, 0.190875, 0.265917, 0.160458, 0.251833, 0.20325, 0.259125, 0.214, 0.219583, 1.0225, 0.212542, 0.253875, 0.160084, 0.164083, 0.154833, 0.163542, 0.292, 0.484292, 0.139833, 0.156125, 0.156583, 0.15775, 0.149459, 0.157875, 0.166, 0.280042, 0.114292, 0.189042, 0.161541, 0.208875, 0.122125, 0.147417, 0.15425, 0.14775, 0.150875, 0.14575, 0.220709, 0.1205, 0.217583, 0.154333, 0.154167, 0.177834, 0.162, 0.13625, 0.174375, 0.188166, 0.202625, 0.171459, 0.208125, 0.189542, 0.179125, 0.194542, 0.20025, 0.19325, 0.23875, 0.175292, 0.20925, 0.178833, 0.194708, 0.199917, 0.192791, 0.165541, 0.2065, 0.202166, 0.19975, 0.172209, 0.204625, 0.158583, 0.189584, 0.165833, 0.137458, 0.178708, 0.133, 0.155625, 0.149417, 0.152125, 0.151959, 0.1485, 0.146625, 0.149583, 0.149125, 0.20625, 0.105292, 0.158625, 0.141208, 0.15525, 0.141125, 0.148833, 0.143666, 0.145417, 0.150292, 0.160666, 0.147209, 0.157916, 0.14675, 0.163959, 0.141, 0.152833, 0.161459, 1.12488, 0.117583, 0.240833, 0.184375, 0.163084, 0.183917, 0.194792, 0.158042, 0.215666, 0.104834, 0.153833, 0.146417, 0.144667, 0.156041, 0.232875, 0.110167, 0.177917, 0.153666, 0.153625, 0.226, 0.2225, 0.103208, 0.166416, 0.156291, 0.154, 0.149083, 0.147667, 0.149542, 0.152916, 0.146125, 0.156667, 0.143333, 2.37913];
	const gpu_bottleneck_times = [1.54279, 25.134, 23.1611, 7.56658, 5.256, 5.90758, 5.28362, 5.37296, 6.77875, 5.36992, 5.60687, 5.46858, 5.23633, 5.37567, 5.96008, 5.40946, 5.56467, 5.51187, 5.78292, 5.493, 6.80146, 5.36767, 5.29567, 5.83954, 5.39692, 6.27983, 5.67571, 5.5725, 6.50104, 6.73454, 5.738, 6.63154, 6.24396, 5.36867, 6.76213, 6.25338, 6.11233, 6.55646, 6.34425, 7.23579, 7.2335, 7.21462, 7.33083, 6.70908, 7.79033, 7.03946, 7.94017, 7.58087, 8.29796, 8.04371, 9.38429, 7.83683, 9.04754, 10.3838, 10.2245, 10.1203, 10.3637, 11.2178, 11.3635, 11.4833, 13.1137, 12.3654, 15.0381, 16.188, 16.8086, 17.4666, 16.8133, 18.197, 17.0253, 17.2838, 19.4615, 20.0897, 30.7945, 22.9799, 23.072, 19.6293, 19.729, 18.112, 17.2756, 17.1664, 16.5513, 15.0406, 13.3843, 13.6602, 13.2825, 12.6056, 14.0065, 12.544, 13.069, 12.8983, 13.188, 13.3439, 12.5594, 12.8298, 10.8745, 13.4406, 13.5571, 12.3857, 12.5558, 12.0241, 12.8842, 11.9019, 11.7187, 14.4026, 11.056, 13.2255, 12.806, 13.2211, 13.3926, 13.327, 12.6152, 11.8706, 13.0849, 12.7627, 12.5555, 11.7055, 12.532, 12.1183, 11.6111, 12.1576, 12.9283, 13.4503, 12.6902, 13.7003, 12.7314, 13.3302, 13.4654, 12.3383, 11.561, 13.0152, 12.4598, 11.76, 13.1056, 13.1653, 12.7608, 11.9997, 12.4902, 12.4564, 13.567, 13.2083, 13.044, 13.1425, 12.32, 12.4122, 13.5235, 12.6723, 12.9797, 13.7265, 10.5808, 12.8343, 11.443, 12.128, 12.2863, 13.6225, 13.9016, 13.4309, 12.5847, 12.7976, 13.1621, 13.4215, 14.1854, 11.1242, 11.9408, 13.1364, 11.9063, 12.3255, 10.8627, 12.2991, 12.5086, 12.6429, 14.5684, 15.9045, 13.0538, 13.2377, 15.0943, 13.5303, 13.3601, 12.5317, 12.6423, 11.286, 15.28, 9.62879, 12.0335, 12.4378, 12.5196, 15.324, 13.2377, 13.5679, 14.6273, 11.1315, 15.2988, 13.3004, 13.9301, 12.5496, 12.152, 12.9458, 12.6968, 11.681, 12.1235, 13.1061, 13.7246, 14.4427, 14.7455, 12.5901, 15.0194, 11.6774, 14.1368, 11.2181, 13.2127, 12.2056, 12.5385, 11.0959, 12.0698, 12.6517, 11.796, 12.0208, 14.0317, 11.724, 11.7069, 10.515, 12.7339, 11.4638, 11.1376, 12.9118, 13.924, 15.593, 13.7663, 13.3978, 13.0787, 12.7875, 13.4122, 14.1079, 12.056, 12.7683, 12.7188, 11.4447, 11.5245, 12.5394, 12.5967, 12.0741, 13.4358, 13.9777, 15.6955, 14.8104, 17.5986, 10.5838, 13.1173, 12.5842, 13.2916, 13.3951, 14.4303, 11.237, 13.5228, 10.1483, 10.7305, 14.2323, 14.0122, 14.0377, 15.0331, 14.5862, 13.4397, 12.8135, 13.6139, 12.2729, 13.7193, 13.2445, 12.9143, 15.3931, 11.4625, 13.12, 13.062, 12.3372, 12.6037, 11.8774, 10.3929, 12.0092, 11.5294, 11.3474, 12.8761, 14.7325, 13.3276, 15.8695, 14.3348, 15.5119, 12.8054, 18.2453, 8.06225, 11.7227, 12.6968, 13.1639, 11.819, 15.6604, 9.14733, 12.8712, 13.9749, 14.7412, 15.3988, 13.3994, 16.7117, 13.4806, 12.6229, 13.5504, 14.0022, 15.0194, 18.8348, 3.92142, 12.5781, 11.4268, 11.8635, 12.5057, 13.7982, 15.003, 16.4302, 14.3527, 18.38, 8.82375, 14.4777, 13.7762, 13.4403, 11.707, 12.9722, 11.295, 14.6314, 8.79679, 13.555, 12.4596, 15.8605, 15.8023, 15.3783, 13.1591, 12.7572, 15.083, 13.5192, 12.6955, 12.0444, 13.9493, 12.3649, 12.7686, 10.93, 12.0738, 12.5277, 17.2642, 15.7523, 11.6525, 15.7154, 12.4595, 13.3912, 14.1593, 12.5427, 12.3093, 13.0816, 11.3301, 13.9716, 9.83467, 13.169, 12.4918, 15.415, 15.2236, 12.2343, 13.4175, 15.5652, 13.1114, 13.6396, 13.316, 13.42, 12.1236, 19.3549, 4.50508, 12.6914, 12.6146, 12.5757, 12.3187, 17.8423, 10.8245, 18.1933, 10.8368, 14.2003, 11.8824, 15.3107, 14.207, 11.7702, 13.3798, 14.6778, 10.6839, 13.6157, 11.9453, 14.704, 15.4283, 15.634, 15.7101, 13.0507, 14.1519, 13.0215, 14.0651, 13.3875, 12.6944, 13.821, 11.7449, 12.3495, 12.0793, 12.0539, 12.3217, 12.7843, 17.6182, 12.0335, 12.7505, 16.2024, 14.7733, 11.6143, 13.163, 13.002, 14.6371, 11.6242, 11.8175, 11.0132, 15.5407, 9.14396, 12.6286, 15.7063, 19.1778, 8.53654, 15.4073, 14.7515, 12.95, 13.5079, 14.6402, 12.2524, 12.6213, 15.4447, 8.84267, 11.7105, 11.7402, 10.8882, 13.267, 14.1082, 16.535, 15.652, 15.5425, 13.6992, 12.8696, 12.8919, 13.3871, 13.202, 12.4324, 11.83, 12.9278, 12.3187, 12.012, 11.5821, 13.3414, 16.2374, 15.6646, 13.28, 15.8711, 13.4595, 11.5704, 13.1153, 12.2377, 17.1746, 9.01604, 13.0771, 12.3782, 12.0471, 12.3012, 12.6021, 16.4077, 16.4293, 14.9338, 13.7776, 17.9737, 8.9305, 13.2372, 13.3786, 13.2963, 12.2243, 12.0703, 12.6731, 12.3107, 14.5536, 12.7332, 12.9312, 15.4952, 12.6308, 13.239, 13.788, 12.6405, 13.1459, 12.2, 15.6241, 12.56, 13.0275, 12.5754, 11.0307, 11.708, 13.2354, 13.4929, 16.2665, 16.1767, 15.4039, 38.4196];
	
	new Chart("gpu-ex", {
		type: "line",
		data: {
			labels: frameNumbers,
			datasets: [
				{ label: "baseline", data: baseline_times, pointStyle:false },
				{ label: "subdivided cube", data: gpu_bottleneck_times, pointStyle:false },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "GPU Bottleneck" }, //show a chart title
				legend: { display: true, onClick:()=>{} }, //show legend but don't allow interacting
			},
			scales: {
				y:{
					min:0, //having y-axis start at zero provides better relative view of data
					title: { display:true, text:"frame time (ms)" },
				},
				x:{
					title: { display:true, text:"frame number" },
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<!-- <p class="placeholder">
Provide evidence that in each scene the CPU- or GPU-part of the workload is, indeed, a bottleneck.
Use charts and graphs as appropriate to make your argument.
</p> -->


<h3>Performance improvements <span class="atag extra">A1x-fast</span></h3>

<h4>Flattened Scene Graph</h4>
<p>
To improve the efficiency of traversing the scene graph every render frame, I 
decided to generate an optimized scene graph by precomputing <code>WORLD_TO_LOCAL</code>
matrices, allowing me to push up static nodes and reduce the depth of the tree. The end result
is a graph where all static nodes are leaves, and only nodes with animation drivers have children.
The code for this is located in <code>precompute_scene</code> in the scope labeled with the comment
<code>//construct optimized scene graph:</code>.
</p>

<h4>Indexed Meshes</h4>
<p>
I changed the draw call to process indexed meshes instead of vertex streams.
I did this by transforming the vertex stream loaded from .b72 binaries into
a vector of unique vertices and a vector of indices to draw during scene loading in <code>precompute_scene</code>.
I mirrored the setup of <code>object_vertices</code> to create a <code>object_indices</code> GPU buffer
that is bound to the index buffer using <code>vkCmdBindIndexBuffer</code> before I call
<code>vkCmdDrawIndexed</code> within the render pass in <code>SceneViewer::render</code>.
</p>

<h4>Tests</h4>
<p>
I tested my optimizations on two scenes: <code>sphereflake.s72</code> and my own subdivided cube scene <code>cube.s72</code>.
The following data were gathered with the same workflow as <span class="atag">A1-test</span> and on the same device (Apple M1 Max).
</p>

<figure>
<canvas id="sphereflake-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const frameNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500];
	const baseline_times = [272.145, 270.868, 265.163, 263.756, 265.516, 264.269, 265.597, 264.104, 262.892, 263.91, 264.047, 268.892, 263.607, 267.4, 264.447, 261.52, 263.239, 263.754, 264.565, 264.076, 265.337, 265.284, 262.966, 263.606, 263.874, 263.106, 264.46, 262.093, 264.257, 264.984, 262.637, 264.463, 262.66, 263.762, 262.655, 263.425, 263.742, 263.154, 261.793, 264.213, 262.339, 263.658, 263.928, 263.049, 264.948, 262.256, 263.671, 264.64, 262.2, 264.04, 265.29, 304.936, 333.423, 263.745, 263.408, 264.308, 264.664, 263.714, 263.481, 265.522, 262.485, 264.055, 265.425, 262.749, 263.92, 264.244, 263.648, 265.517, 264.333, 267.372, 262.676, 264.508, 264.43, 265.356, 265.179, 263.175, 263.362, 264.338, 262.813, 263.902, 264.609, 263.414, 264.779, 263.141, 264.025, 261.949, 263.983, 263.273, 264.707, 264.462, 262.757, 263.626, 263.439, 264.181, 263.779, 263.028, 263.601, 263.48, 264.202, 265.618, 264.369, 263.781, 264.2, 262.184, 264.23, 263.7, 263.137, 263.276, 262.163, 263.874, 264.526, 263.986, 263.504, 263.965, 263.622, 265.271, 265.1, 263.841, 263.157, 262.814, 262.975, 263.642, 264.933, 263.394, 266.475, 261.849, 267.619, 265.093, 262.755, 263.451, 277.901, 302.805, 264.725, 264.823, 286.123, 266.742, 275.94, 277.007, 343.622, 265.343, 265.471, 263.09, 263.93, 265.046, 262.901, 265.072, 263.217, 265.423, 263.938, 265.896, 263.628, 263.246, 265.3, 263.947, 263.718, 264.588, 266.884, 279.149, 263.914, 266.215, 262.299, 263.083, 263.126, 265.512, 262.863, 264.27, 263.254, 264.936, 262.975, 264.419, 264.428, 264.652, 264.499, 264.511, 264.311, 262.304, 263.654, 262.48, 263.581, 264.984, 265.711, 264.46, 267.569, 263.817, 263.803, 263.804, 267.033, 264.213, 263.897, 262.923, 264.612, 263.6, 264.25, 263.961, 266.683, 266.957, 264.288, 263.736, 264.435, 263.257, 263.687, 262.454, 264.682, 266.827, 265.851, 265.773, 265.029, 266.673, 265.505, 284.586, 299.61, 266.474, 270.221, 275.717, 291.696, 267.596, 265.193, 264.787, 265.829, 266.135, 267.039, 263.222, 264.654, 265.242, 265.59, 266.094, 266.926, 267.334, 265.078, 264.933, 266.308, 267.069, 265.989, 265.347, 265.117, 267.101, 273.746, 269.879, 268.581, 263.297, 264.289, 264.247, 263.348, 263.649, 262.883, 264.233, 267.114, 264.873, 264.987, 264.136, 263.238, 264.327, 265.173, 263.458, 264.915, 263.324, 264.153, 263.559, 264.564, 265.165, 263.503, 263.054, 264.506, 262.387, 263.261, 265.083, 263.231, 263.868, 262.972, 265.088, 263.82, 264.137, 262.404, 263.727, 262.094, 262.031, 265.943, 265.772, 265.669, 265.957, 266.552, 265.858, 265.579, 266.374, 266.016, 266.445, 264.662, 266.36, 299.026, 285.404, 274.564, 265.355, 267.168, 268.558, 264.92, 318.032, 323.188, 267.014, 266.456, 291.669, 266.558, 266.197, 265.384, 265.358, 265.464, 266.383, 269.214, 266.972, 265.775, 269.545, 265.045, 266.416, 264.309, 266.705, 266.332, 265.974, 266.223, 264.623, 265.397, 263.808, 263.793, 263.056, 263.561, 264.962, 263.246, 265.736, 264.235, 262.845, 264.644, 264.377, 263.418, 264.066, 265.558, 263.062, 265.389, 264.071, 265.036, 264.355, 263.747, 263.135, 263.986, 264.934, 263.472, 265.159, 264.548, 263.137, 262.89, 263.257, 265.045, 265.179, 263.924, 267.007, 265.698, 266.618, 263.541, 264.775, 264.063, 265.561, 265.21, 272.145, 267.482, 267.32, 266.388, 264.52, 266.273, 264.957, 264.66, 264.392, 282.414, 305.075, 316.852, 275.891, 263.995, 264.016, 265.796, 263.938, 263.146, 275.038, 264.898, 263.127, 264.1, 264.581, 262.428, 265.845, 263.637, 263.593, 262.938, 263.464, 264.169, 264.17, 263.674, 263.339, 262.195, 263.242, 262.843, 264.481, 263.247, 263.275, 262.866, 265.242, 264.4, 264.101, 263.539, 264.621, 262.449, 266.985, 263.956, 267.694, 264.78, 277.87, 262.396, 264.906, 264.896, 264.512, 262.855, 264.007, 264.298, 263.915, 262.178, 265.26, 263.774, 264.585, 265.022, 262.644, 263.246, 264.076, 263.44, 265.4, 266.589, 266.687, 264.445, 265.766, 266.673, 268.53, 267.506, 266.936, 267.239, 265.224, 264.906, 265.377, 266.529, 267.065, 266.191, 266.22, 266.499, 289.17, 315.203, 266.04, 266.746, 266.66, 267.094, 267.635, 283.173, 295.828, 266.495, 265.732, 266.841, 266.341, 266.86, 266.282, 268.409, 268.404, 266.951, 270.497, 270.077, 266.625, 267.68, 265.176, 266.01, 268.11, 268.097, 266.248, 267.173, 267.829, 266.707, 266.434, 266.847, 266.225, 267.937, 267.044, 266.319, 268.312, 263.877, 263.188, 264.144, 262.753, 264.112, 262.523, 264.752, 263.685, 263.999, 264.568, 264.484, 263.981, 264.222, 264.313, 265.036, 265.594, 263.497, 317.005];
	const optim1_times = [267.966, 265.046, 281.929, 261.733, 258.159, 259.026, 260.168, 258.171, 261.095, 259.353, 260.032, 259.25, 261.832, 262.706, 262.731, 263.399, 264.26, 260.989, 261.899, 261.473, 261.149, 262.409, 262.392, 262.312, 262.107, 262.596, 261.624, 260.913, 264.8, 262.11, 263.546, 262.552, 260.504, 261.43, 262.399, 263.18, 263.149, 261.036, 262.445, 261.274, 262.099, 262.764, 264.104, 262.752, 262.666, 260.602, 262.185, 263.356, 263.2, 260.346, 261.161, 263.836, 263.479, 260.602, 262.435, 261.829, 261.995, 262.673, 262.822, 263.904, 261.793, 261.54, 261.35, 261.663, 261.234, 263.538, 263.332, 263.243, 260.34, 259.377, 273.43, 328.457, 274.547, 298.461, 265.358, 259.003, 258.631, 260.452, 259.356, 258.887, 259.715, 260.527, 260.126, 258.431, 257.323, 262.111, 261.668, 260.106, 259.353, 261.396, 257.872, 259.171, 260.945, 259.744, 257.982, 263.442, 270.147, 260.5, 259.437, 261.762, 258.412, 260.465, 260.623, 260.079, 260.187, 260.004, 261.446, 261.762, 259.923, 257.406, 259.639, 260.427, 259.264, 260.04, 259.269, 259.307, 260.874, 258.522, 259.411, 257.868, 260.533, 257.317, 258.229, 258.813, 258.375, 258.396, 259.258, 259.396, 278.043, 259.839, 261.396, 257.988, 259.73, 260.024, 260.594, 258.668, 259.217, 259.211, 259.611, 258.116, 258.921, 261.077, 262.511, 259.116, 266.335, 281.467, 258.386, 259.455, 286.096, 294.807, 261.348, 258.811, 276.555, 276.94, 303.773, 260.566, 260.867, 258.394, 260.788, 260.152, 258.675, 259.881, 257.397, 258.593, 260.417, 261.391, 260.235, 260.208, 260.911, 259.061, 261.25, 259.915, 260.898, 259.112, 261.928, 260.499, 293.776, 258.902, 301.698, 261.572, 262.347, 260.231, 261.034, 262.252, 260.489, 260.113, 260.933, 261.691, 260.043, 261.116, 259.799, 261.088, 262.082, 260.537, 259.227, 261.57, 260.494, 258.897, 260.028, 262.414, 258.872, 261.897, 258.507, 258.874, 259.783, 257.809, 259.751, 258.293, 260.509, 261.363, 259.591, 260.095, 258.996, 258.954, 259.72, 257.946, 260.548, 259.954, 260.923, 258.3, 260.597, 259.284, 260.573, 258.274, 259.421, 259.136, 259.457, 258.655, 279.471, 286.379, 260.033, 259.998, 303.737, 288.142, 258.948, 259.316, 259.196, 258.642, 258.262, 258.584, 259.926, 262.535, 261.68, 262.766, 262.258, 263.881, 261.888, 264.315, 263.168, 263.392, 261.469, 261.721, 262.22, 262.742, 262.738, 260.921, 262.617, 261.956, 267.102, 262.736, 262.916, 263.163, 264.557, 263.456, 260.309, 289.442, 261.73, 262.336, 263.488, 259.313, 264.75, 262.264, 264.345, 265.04, 260.919, 261.118, 262.285, 264.682, 263.517, 262.421, 263.258, 262.69, 261.044, 263.135, 262.644, 262.54, 262.379, 263.045, 262.15, 261.874, 262.936, 260.337, 262.567, 261.916, 263.495, 261.35, 262.408, 262.68, 262.642, 262.864, 263.484, 263.959, 262.327, 263.81, 260.509, 258.81, 258.995, 259.987, 366.227, 262.503, 260.774, 260.747, 258.934, 262.435, 259.987, 261.331, 258.651, 260.397, 260.46, 258.742, 258.918, 259.052, 260.917, 323.288, 302.154, 261.374, 261.481, 258.873, 260.576, 260.994, 262.245, 258.537, 260.65, 260.928, 259.821, 259.285, 258.924, 258.8, 260.598, 257.346, 258.144, 257.018, 258.606, 258.926, 259.161, 258.364, 259.113, 258.098, 260.52, 259.099, 260.49, 259.557, 260.035, 257.285, 259.523, 258.923, 258.998, 258.644, 258.444, 259.943, 258.214, 257.401, 260.568, 258.524, 260.956, 260.962, 261.457, 259.317, 258.048, 260.459, 260.97, 259.367, 260.987, 257.914, 259.008, 260.042, 260.438, 258.972, 259.622, 260.077, 259.322, 258.543, 259.233, 259.242, 260.056, 259.268, 258.678, 260.813, 260.527, 258.882, 273.378, 291.004, 258.821, 259.341, 260.299, 260.629, 258.59, 259.885, 259.676, 260.526, 259.097, 258.96, 259.723, 259.67, 258.267, 260.448, 258.373, 258.814, 257.764, 260.166, 280.882, 257.1, 259.369, 260.13, 259.871, 258.23, 259.717, 257.408, 258.608, 259.501, 259.541, 260.147, 260.03, 257.452, 259.67, 258.741, 259.396, 257.446, 261.783, 261.356, 259.202, 259.927, 258.663, 257.859, 259.033, 257.723, 258.677, 258.249, 260.04, 258.759, 258.614, 259.011, 259.59, 258.541, 258.946, 258.141, 259.876, 258.782, 257.845, 260.085, 258.754, 259.704, 258.827, 259.294, 260.522, 258.794, 260.73, 260.287, 257.706, 257.237, 259.928, 258.416, 260.072, 259.765, 258.63, 259.784, 259.998, 258.489, 257.424, 297.089, 267.13, 259.601, 259.786, 257.917, 260.284, 259.555, 259.99, 260.391, 259.561, 260.062, 260.371, 261.14, 259.757, 258.519, 260.496, 263.539, 261.804, 262.484, 258.979, 259.898, 260.941, 258.783, 258.798, 260.164, 259.336, 258.772, 258.579, 259.853, 257.928, 320.809];
	const optim2_times = [274.755, 271.499, 266.864, 266.272, 266.129, 264.755, 266.888, 263.88, 265.24, 264.791, 263.711, 264.686, 264.362, 265.167, 262.469, 262.758, 263.34, 263.157, 264.111, 265.247, 265.179, 263.014, 264.936, 265.747, 263.935, 263.691, 264.83, 265.292, 264.234, 264.619, 263.585, 264.768, 263.668, 264.751, 264.163, 264.743, 263.776, 264.507, 264.728, 265.829, 266.244, 284.789, 268.68, 264.361, 263.073, 263.279, 264.208, 265.637, 263.474, 263.389, 266.588, 262.897, 264.395, 263.412, 263.559, 263.933, 264.569, 264.053, 264.073, 262.505, 263.094, 264.292, 263.46, 262.841, 263.653, 265.904, 262.385, 263.972, 263.901, 263.074, 262.5, 264.904, 264.786, 262.717, 263.429, 263.366, 265.897, 266.648, 262.521, 263.155, 262.449, 262.448, 263.319, 263.97, 264.488, 264.088, 264.12, 264.146, 266.088, 264.458, 265.594, 263.297, 264.707, 262.914, 265.047, 263.798, 262.552, 266.436, 263.724, 265.53, 263.995, 264.084, 265.569, 265.427, 264.044, 264.223, 264.123, 262.957, 263.191, 264.087, 264.21, 264.709, 263.757, 263.611, 263.647, 263.699, 265.11, 263.26, 262.638, 266.143, 263.415, 263.862, 264.398, 265.03, 262.865, 264.415, 264.327, 264.399, 263.324, 263.572, 264.414, 262.361, 264.172, 263.699, 264.797, 263.802, 263.506, 263.129, 264.135, 263.94, 262.67, 264.323, 264.321, 263.76, 263.885, 262.323, 264.634, 262.13, 263.804, 265.388, 264.074, 264.955, 264.014, 264.136, 269.618, 266.184, 264.634, 264.75, 264.439, 264.27, 265.268, 264.424, 262.894, 266.227, 314.178, 330.184, 264.152, 264.227, 266.291, 263.357, 264.346, 265.358, 263.724, 264.8, 264.463, 264.34, 263.463, 263.516, 264.217, 264.838, 264.256, 263.266, 265.407, 264.233, 265.036, 262.494, 264.299, 264.342, 264.125, 265.211, 263.212, 263.465, 262.911, 262.903, 262.909, 264.418, 263.053, 264.554, 263.614, 263.593, 265.658, 263.577, 264.828, 263.566, 263.905, 262.981, 262.856, 263.292, 261.836, 263.515, 267.734, 262.978, 266.641, 264.172, 263.79, 263.951, 264.976, 265.011, 288.797, 263.687, 263.178, 264.845, 264.179, 264.98, 262.97, 263.685, 264.072, 263.853, 262.156, 263.115, 264.884, 263.616, 263.774, 264.809, 266.651, 265.487, 265.399, 265.378, 267.009, 267.887, 265.369, 264.946, 265.257, 264.658, 266.721, 265.422, 269.458, 264.832, 265.097, 266.287, 266.682, 267.122, 264.614, 268.474, 270.676, 265.246, 266.848, 265.578, 266.532, 264.38, 266.309, 267.889, 265.631, 265.185, 266.908, 266.028, 265.567, 267.508, 268.275, 265.303, 264.248, 264.113, 265.111, 265.003, 263.654, 265.342, 267.644, 265.523, 264.188, 262.982, 264.22, 263.054, 264.567, 263.617, 265.601, 262.561, 266.533, 264.078, 265.282, 263.702, 264.499, 264.01, 263.898, 264.449, 263.275, 265.342, 264.231, 263.737, 264.162, 264.098, 265.85, 264.595, 264.771, 263.559, 264.259, 263.406, 263.47, 264.539, 265.38, 265.565, 265.112, 265.774, 267.493, 267.523, 265.687, 267.317, 267.053, 265.099, 265.863, 266.676, 264.873, 266.481, 266.403, 269.259, 267.165, 270.428, 266.311, 265.435, 266.484, 266.265, 266.862, 266.364, 266.076, 265.758, 266.781, 266.578, 265.7, 266.757, 266.287, 266.343, 268.783, 265.569, 266.742, 266.134, 266.147, 266.397, 266.308, 265.42, 265.54, 263.22, 264.26, 263.878, 266.074, 264.28, 263.893, 263.828, 263.373, 264.489, 263.667, 262.892, 263.773, 263.219, 279.026, 264.365, 263.273, 262.803, 264.931, 264.936, 263.429, 265.01, 264.217, 264.787, 263.967, 264.279, 263.138, 264.362, 264.354, 263.897, 264.893, 263.436, 266.424, 268.816, 264.183, 263.784, 264.505, 263.375, 265.386, 265.067, 266.124, 287.91, 271.381, 298.281, 275.711, 296.982, 264.381, 265.425, 265.788, 263.955, 264.137, 265.705, 266.796, 265.227, 265.825, 264.796, 264.629, 263.439, 262.819, 265.138, 264.495, 263.468, 264.05, 264.742, 264.159, 263.63, 263.744, 263.183, 264.532, 262.836, 265.148, 264.353, 263.599, 263.841, 263.969, 263.762, 263.573, 263.805, 263.923, 264.734, 263.605, 263.312, 265.565, 264.894, 263.068, 263.622, 265.284, 264.741, 267.15, 264.182, 266.338, 263.86, 264.379, 263.152, 264.161, 263.658, 263.035, 262.975, 263.467, 264.259, 261.719, 263.422, 263.786, 263.77, 263.16, 265.533, 262.545, 262.765, 263.6, 264.101, 263.838, 265.107, 265.672, 267.304, 267.914, 265.533, 265.339, 266.351, 266.823, 266.563, 266.529, 266.575, 266.428, 264.844, 265.876, 268.07, 266.504, 266.159, 266.809, 266.263, 265.16, 265.896, 266.876, 266.937, 265.589, 265.789, 267.451, 265.898, 266.467, 264.474, 265.117, 265.804, 267.452, 267.235, 267.589, 268.859, 271.158, 265.435, 264.578, 266.19, 266.61, 324.817];
	
	new Chart("sphereflake-ex", {
		type: "line",
		data: {
			labels: frameNumbers,
			datasets: [
				{ label: "baseline", data: baseline_times, pointStyle:false },
				{ label: "+flattened-graph", data: optim1_times, pointStyle:false },
				{ label: "+flattened-graph +indexed_mesh", data: optim2_times, pointStyle:false },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "Performance on sphereflake.s72" }, //show a chart title
				legend: { display: true, onClick:()=>{} }, //show legend but don't allow interacting
			},
			scales: {
				y:{
					title: { display:true, text:"frame time (ms)" },
				},
				x:{
					title: { display:true, text:"frame number" },
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<figure>
<canvas id="bar-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const labels = ["baseline", "+flattened-graph", "+flattened-graph +indexed_mesh"];

	new Chart("bar-ex", {
		type: "bar",
		data: {
			labels: labels,
			datasets: [
				{ label: "sphereflake", data: [266.615224, 262.287836, 265.454222] },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "Mean Performance on sphereflake.s72" }, //show a chart title
				legend: { display: false },
			},
			scales: {
				y:{
					title: { display:true, text:"frame time (ms)" },
					min: 260,
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<figure>
<canvas id="cube-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const frameNumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128, 129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144, 145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256, 257, 258, 259, 260, 261, 262, 263, 264, 265, 266, 267, 268, 269, 270, 271, 272, 273, 274, 275, 276, 277, 278, 279, 280, 281, 282, 283, 284, 285, 286, 287, 288, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 307, 308, 309, 310, 311, 312, 313, 314, 315, 316, 317, 318, 319, 320, 321, 322, 323, 324, 325, 326, 327, 328, 329, 330, 331, 332, 333, 334, 335, 336, 337, 338, 339, 340, 341, 342, 343, 344, 345, 346, 347, 348, 349, 350, 351, 352, 353, 354, 355, 356, 357, 358, 359, 360, 361, 362, 363, 364, 365, 366, 367, 368, 369, 370, 371, 372, 373, 374, 375, 376, 377, 378, 379, 380, 381, 382, 383, 384, 385, 386, 387, 388, 389, 390, 391, 392, 393, 394, 395, 396, 397, 398, 399, 400, 401, 402, 403, 404, 405, 406, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 428, 429, 430, 431, 432, 433, 434, 435, 436, 437, 438, 439, 440, 441, 442, 443, 444, 445, 446, 447, 448, 449, 450, 451, 452, 453, 454, 455, 456, 457, 458, 459, 460, 461, 462, 463, 464, 465, 466, 467, 468, 469, 470, 471, 472, 473, 474, 475, 476, 477, 478, 479, 480, 481, 482, 483, 484, 485, 486, 487, 488, 489, 490, 491, 492, 493, 494, 495, 496, 497, 498, 499, 500];
	const baseline_times = [0.919292, 8.50058, 23.6065, 15.0362, 5.14258, 5.28533, 5.64354, 5.22429, 5.04542, 5.47213, 4.85625, 5.01775, 5.08542, 5.22246, 5.03046, 4.975, 5.48579, 5.38796, 4.91392, 5.72808, 4.89538, 4.95821, 5.29646, 5.38383, 4.91771, 5.30442, 5.40238, 5.33417, 5.25129, 5.33796, 5.19538, 5.36246, 5.88642, 5.75858, 5.92842, 5.86538, 5.32867, 6.51117, 6.04525, 5.66604, 6.81792, 5.80542, 6.05792, 7.12296, 6.19667, 7.09521, 6.40104, 7.44154, 7.17108, 6.72821, 8.04587, 7.12042, 8.15387, 7.58454, 8.20917, 8.00725, 9.90875, 7.64846, 11.2957, 8.25583, 10.2404, 9.95854, 11.0844, 11.6788, 12.4611, 11.1962, 12.6456, 13.1676, 14.4478, 17.1195, 17.3134, 17.3184, 17.1878, 17.3641, 16.5779, 19.9542, 15.5529, 27.4444, 19.2482, 18.7618, 17.488, 22.1981, 16.1641, 13.7477, 13.4138, 11.912, 12.7037, 12.3552, 13.2019, 13.1859, 12.8382, 13.1704, 13.2031, 13.3379, 13.0062, 11.7511, 13.0069, 13.2219, 12.0261, 12.288, 11.7939, 12.7842, 11.5805, 10.8765, 11.857, 12.6582, 11.7394, 12.753, 13.2272, 12.41, 13.2889, 11.5685, 13.02, 13.0675, 12.2778, 12.2555, 12.2373, 12.0417, 11.5507, 11.9155, 12.052, 11.7028, 11.4581, 12.9066, 12.5915, 11.2594, 11.9766, 12.578, 11.876, 10.7523, 12.8275, 13.3191, 12.0057, 13.689, 12.9463, 13.9231, 13.1359, 11.3502, 13.1232, 12.2853, 12.8542, 14.5863, 8.84492, 12.7184, 12.2391, 10.7283, 12.0039, 12.463, 11.2697, 13.4493, 13.909, 14.2903, 13.0692, 12.6294, 13.2566, 13.1257, 13.9187, 12.049, 10.6375, 12.3017, 12.6766, 10.9189, 12.1745, 14.3133, 11.4488, 11.2857, 13.7201, 14.1263, 12.6562, 14.8759, 12.8662, 13.4218, 12.1998, 13.2734, 11.7378, 11.0899, 12.5758, 12.6297, 11.1298, 11.2294, 13.2257, 15.0564, 13.0245, 13.8825, 12.2793, 13.333, 12.9601, 13.3487, 12.3748, 12.8545, 12.7263, 11.9829, 10.7396, 13.5351, 10.5766, 11.6965, 12.7215, 13.8901, 11.5466, 13.4239, 13.0123, 13.8355, 12.3697, 12.6845, 12.74, 13.0595, 12.5855, 11.2915, 11.342, 13.464, 10.684, 11.5266, 12.906, 12.8952, 13.3765, 12.6105, 13.2703, 15.3129, 10.2002, 11.727, 13.2799, 13.231, 13.5382, 11.8857, 12.3567, 12.828, 12.5642, 11.1968, 12.6743, 13.0881, 12.5565, 10.9977, 12.1029, 12.4965, 12.1477, 11.4675, 14.1721, 13.6814, 16.019, 13.9902, 16.3643, 13.4165, 13.1765, 12.1115, 13.2462, 11.5675, 12.8681, 13.5623, 13.1484, 13.323, 11.8629, 11.666, 17.0726, 10.8234, 16.7035, 10.0121, 15.2572, 13.2506, 13.1692, 13.1719, 13.3185, 12.5386, 12.8585, 12.8396, 12.5752, 10.4993, 13.1999, 14.0358, 13.5209, 13.9468, 13.4856, 14.0806, 16.1706, 12.0128, 13.1985, 13.3807, 11.4442, 14.2675, 14.4376, 10.492, 14.4456, 10.154, 13.1536, 13.3316, 12.1206, 14.0502, 13.4573, 15.9868, 13.2383, 12.1633, 12.0536, 14.0124, 12.7786, 16.2314, 8.5545, 12.4717, 14.0764, 10.2582, 12.6433, 13.41, 14.6192, 15.1698, 13.2101, 13.066, 12.9177, 13.3839, 12.7831, 13.2345, 12.8427, 14.2343, 14.4142, 12.6714, 6.72312, 12.789, 12.4654, 14.4, 14.7945, 13.5199, 16.1449, 15.6793, 10.4629, 13.065, 13.7692, 11.3199, 12.2782, 11.1227, 11.5405, 12.0149, 11.9473, 11.9704, 12.9516, 12.8815, 15.4845, 17.4551, 10.5647, 17.7742, 11.9565, 13.4855, 13.3004, 12.8625, 22.6251, 2.06329, 13.1149, 14.4332, 10.0033, 12.2172, 14.9313, 16.7251, 11.9588, 14.5008, 14.6765, 13.1615, 13.7399, 22.093, 3.69579, 12.3138, 12.6549, 13.4707, 11.858, 11.9912, 11.7524, 12.9755, 11.9909, 14.2343, 15.3073, 10.9919, 15.6504, 13.8911, 13.9754, 12.6274, 12.5016, 12.5242, 11.5863, 12.2267, 12.102, 13.92, 9.73133, 11.9875, 13.2024, 12.4397, 14.9462, 13.7993, 12.5479, 14.2581, 13.2622, 12.2636, 12.3725, 13.5095, 10.9777, 12.6665, 11.487, 15.7171, 8.19963, 12.412, 12.8457, 13.1345, 14.6267, 12.6737, 15.2934, 15.2521, 9.78583, 12.9997, 12.9603, 11.9757, 12.4484, 12.559, 11.3325, 11.648, 12.3047, 13.2234, 11.206, 11.889, 14.992, 15.7102, 14.921, 14.1893, 11.4088, 12.6796, 14.1925, 12.8472, 12.5274, 12.428, 11.8949, 12.2852, 11.3073, 12.0054, 13.1298, 14.1715, 15.491, 13.4872, 11.5353, 13.5104, 12.792, 15.3301, 13.3397, 13.9806, 12.5118, 13.6786, 11.58, 11.7332, 11.6118, 12.7497, 13.7655, 14.8755, 13.1616, 13.82, 14.6587, 12.5893, 12.5206, 13.4767, 13.1064, 12.9481, 13.8204, 11.6451, 11.9445, 11.7974, 12.1924, 11.6599, 16.5695, 11.6255, 13.272, 13.9225, 14.1622, 13.4007, 12.9578, 13.2762, 15.0688, 10.0493, 12.4527, 13.1009, 13.3122, 9.20308, 11.9268, 11.6759, 13.4718, 12.2848, 16.2458, 13.7859, 12.5247, 16.8193, 9.45563, 13.3193, 13.3474, 12.6855, 12.2388, 12.4151, 12.5613, 14.2597, 8.03604, 13.3773, 12.1617, 13.7872, 12.9281, 13.2868, 14.642, 19.8789, 6.11512, 13.4801, 16.6878, 39.1258];
	const optim1_times = [0.890875, 22.8812, 15.6149, 12.7367, 5.50942, 5.29325, 4.95508, 5.24108, 5.18229, 4.89396, 5.04354, 5.21396, 5.19571, 5.17513, 5.68421, 4.84579, 4.93858, 5.32133, 5.42112, 5.10033, 5.45988, 5.60475, 5.39225, 5.15258, 5.52883, 5.31158, 5.16933, 5.58342, 5.20371, 5.57408, 5.35904, 5.21263, 6.30767, 5.51837, 5.42421, 6.18117, 6.01417, 5.24804, 6.46, 6.38908, 5.67771, 6.36313, 6.6865, 6.95458, 6.75742, 6.83962, 7.77229, 6.43562, 7.5825, 7.398, 7.40054, 8.16725, 9.15117, 7.58779, 9.86375, 7.76754, 10.1125, 8.74012, 10.0883, 10.4646, 10.52, 11.4044, 11.8402, 11.3639, 13.0595, 11.756, 15.4472, 16.6161, 17.5386, 17.1483, 16.1567, 18.1101, 19.7654, 18.202, 24.9839, 17.9374, 18.6123, 18.4498, 16.5585, 16.8324, 15.7716, 14.6324, 15.2208, 13.34, 12.7011, 15.2695, 12.7818, 13.2382, 12.7168, 13.6295, 13.2714, 12.4877, 11.888, 11.7212, 13.2082, 12.3392, 13.172, 13.0375, 13.3052, 13.3146, 13.1768, 12.1047, 13.5791, 13.5434, 13.669, 11.9521, 12.5733, 13.0963, 12.9512, 11.8925, 10.853, 11.8067, 12.0071, 12.8921, 12.3106, 12.2821, 12.47, 12.8986, 13.1843, 12.5872, 13.4295, 13.1608, 13.3183, 12.9988, 13.0105, 11.8757, 12.4362, 12.0746, 13.1252, 13.0179, 12.526, 13.953, 13.8506, 14.285, 13.3036, 12.2432, 13.3026, 13.9445, 13.6014, 13.262, 11.73, 12.5823, 12.6608, 13.0506, 10.8011, 11.3982, 12.428, 10.9181, 13.6608, 13.1404, 13.0643, 12.7114, 12.3074, 12.6272, 13.0583, 11.6798, 12.4217, 12.2036, 12.1252, 11.5464, 11.8429, 12.8113, 11.7189, 11.8073, 12.4542, 13.0682, 12.5397, 13.3035, 11.7662, 12.9033, 12.3317, 12.5485, 12.2799, 13.1822, 11.8625, 11.6523, 11.605, 12.6963, 11.2404, 11.8667, 13.8984, 10.7894, 12.4088, 12.4339, 13.0491, 12.175, 11.9772, 13.1759, 13.7559, 12.9905, 13.1123, 11.0682, 13.3558, 10.7117, 11.5574, 12.0027, 12.7265, 13.0853, 11.149, 12.1689, 12.5984, 13.1721, 13.3593, 11.2658, 13.0087, 12.351, 11.7911, 12.0553, 12.8343, 11.4688, 19.912, 5.29029, 12.5343, 13.1123, 12.859, 13.9985, 16.746, 11.0676, 12.6368, 12.4985, 12.3871, 12.26, 13.2261, 11.8665, 12.4122, 12.8278, 13.3237, 9.96504, 12.4358, 12.4431, 13.0885, 11.2804, 14.2632, 12.3366, 12.2816, 11.9204, 12.7459, 11.7457, 13.1477, 12.6994, 13.8376, 13.4981, 9.18279, 11.8401, 14.8815, 9.37387, 11.1361, 12.4168, 13.2148, 15.243, 11.9248, 14.8484, 12.0861, 12.2499, 14.1116, 11.177, 12.8915, 12.1634, 11.6865, 11.5016, 11.8533, 11.3969, 11.857, 12.7627, 12.0649, 12.5509, 13.2044, 12.9209, 13.2428, 11.7435, 12.0737, 12.9789, 13.124, 11.985, 13.7175, 10.0536, 12.5287, 18.1241, 5.17, 12.6103, 11.812, 12.4304, 13.2656, 13.9655, 12.3827, 12.2272, 14.4799, 9.74254, 13.3782, 14.3742, 10.9041, 10.7169, 12.3256, 11.5225, 11.8509, 12.5303, 11.7322, 11.5789, 13.3396, 13.8492, 11.7685, 14.1783, 13.493, 12.8705, 13.1641, 12.6615, 13.2663, 12.2589, 13.3335, 13.5907, 9.13008, 11.7601, 13.1622, 11.0259, 12.5734, 14.7571, 16.0473, 12.3275, 17.0228, 7.75796, 12.4862, 12.6105, 12.1817, 13.0738, 13.7115, 16.9428, 8.63346, 12.629, 13.1262, 12.7462, 14.1485, 14.9236, 14.1304, 15.716, 13.288, 12.5845, 13.4573, 14.4995, 10.2987, 13.0935, 11.9835, 12.3354, 11.1192, 10.3173, 11.923, 12.6628, 13.115, 13.1425, 13.1868, 12.814, 13.469, 13.0252, 12.5089, 12.4603, 12.2416, 12.4557, 13.8713, 10.1082, 11.8671, 12.9795, 12.6236, 10.944, 13.1241, 15.5801, 12.8391, 15.1755, 12.9525, 12.0248, 13.152, 16.6202, 9.76692, 12.5346, 12.5221, 14.5041, 9.47329, 12.4528, 12.1709, 12.0435, 16.0156, 8.07579, 12.4531, 11.9245, 11.5914, 13.7941, 10.8429, 11.605, 14.1706, 12.1222, 12.9223, 12.519, 13.8595, 12.8587, 12.6918, 13.505, 11.7133, 16.9658, 10.2664, 11.3338, 10.0669, 11.8048, 11.7889, 12.7822, 11.9866, 12.9967, 15.1443, 14.5194, 12.7409, 12.8859, 13.163, 14.0946, 12.5595, 12.9675, 13.1007, 12.028, 12.2914, 11.8262, 12.6515, 10.8148, 12.9701, 11.8963, 12.3388, 15.3228, 12.6931, 14.5845, 13.7488, 10.3335, 13.8941, 11.8876, 12.5512, 12.0073, 13.9705, 10.9995, 11.5262, 11.6908, 12.5279, 11.7906, 11.9573, 13.6824, 14.9238, 14.938, 18.3733, 8.95333, 15.4122, 13.276, 15.8935, 9.30742, 12.4474, 11.5225, 13.7384, 10.1858, 11.9369, 15.761, 9.00275, 15.1973, 14.9534, 14.9258, 12.9905, 13.2067, 15.1618, 13.1128, 12.6517, 13.2276, 13.5847, 11.1219, 11.9323, 10.722, 13.5274, 13.1702, 13.6068, 14.7857, 14.6753, 13.1257, 13.1331, 11.7026, 14.748, 10.5663, 13.2527, 12.2792, 11.6606, 11.1779, 13.1613, 11.3442, 12.2617, 12.5343, 12.67, 14.859, 14.5141, 13.5218, 16.6079, 9.38175, 13.2619, 14.9266, 12.7529, 12.7922, 12.3325, 12.4518, 10.8819, 11.8863, 11.9217, 45.1264];
	const optim2_times = [1.17592, 25.035, 13.8124, 6.5135, 5.79304, 5.29575, 6.77062, 5.25329, 5.90817, 5.21792, 5.98983, 6.18504, 5.49912, 5.40646, 5.87404, 5.35512, 6.14062, 6.42946, 5.43658, 5.47242, 5.57442, 5.36875, 5.51954, 6.66683, 5.86817, 6.11233, 5.84788, 6.19133, 5.73246, 5.99812, 6.72562, 6.29596, 5.63046, 6.41817, 6.43258, 5.83137, 7.05196, 6.95212, 6.94721, 6.25842, 7.18054, 7.35775, 7.312, 8.12613, 6.31588, 8.14162, 8.51092, 8.71837, 7.73354, 9.90804, 9.24454, 9.80762, 9.34862, 10.281, 10.6395, 10.8987, 11.2477, 12.817, 11.7823, 12.2644, 13.2553, 16.2153, 16.6372, 18.13, 23.8454, 17.5852, 18.515, 18.8616, 20.9981, 27.198, 21.9336, 26.2267, 19.5916, 18.0295, 18.2725, 18.9246, 15.209, 16.5765, 15.791, 16.9448, 16.7864, 15.9767, 16.8743, 14.6569, 16.254, 15.0943, 13.0008, 12.8079, 13.0022, 13.3692, 12.7432, 14.5594, 13.637, 13.245, 14.8059, 15.2001, 12.5589, 13.5055, 14.0855, 13.6876, 13.3374, 14.267, 14.4155, 11.655, 12.1588, 13.344, 11.9252, 11.9599, 13.0314, 15.832, 13.874, 12.4502, 13.1565, 13.6062, 13.4329, 15.5946, 14.8598, 12.3777, 12.0817, 12.9019, 12.4932, 11.2319, 12.3655, 13.0761, 12.1338, 12.4416, 11.3004, 12.8155, 11.6173, 12.6609, 12.8258, 12.7221, 12.971, 13.0047, 13.2596, 13.3927, 13.2113, 13.2211, 12.636, 13.3354, 13.4252, 12.9468, 10.4979, 12.4199, 12.528, 12.2875, 11.4346, 13.3111, 11.7728, 15.9471, 13.7047, 12.1431, 13.0454, 12.9763, 12.1195, 13.1456, 13.2395, 12.4131, 14.1283, 9.00537, 11.7732, 12.7828, 12.2419, 13.0267, 13.0767, 14.5111, 12.6657, 12.2512, 13.308, 12.9513, 13.2032, 12.5274, 11.9069, 13.0607, 13.7875, 13.1093, 16.1583, 6.66183, 13.4457, 12.8881, 15.4623, 14.6148, 14.3177, 15.0428, 15.7127, 9.75462, 13.2723, 13.3003, 12.4893, 14.807, 10.7314, 10.5143, 12.5137, 12.8624, 11.8541, 12.8117, 12.7947, 12.9553, 13.2322, 11.2506, 11.813, 13.5561, 12.7698, 12.0017, 13.4027, 13.654, 14.1158, 14.9942, 18.2549, 11.6906, 13.3562, 13.781, 14.9854, 11.4381, 12.454, 12.1668, 14.7579, 10.2226, 11.0519, 15.4586, 13.0273, 12.9679, 12.5808, 13.0145, 13.863, 11.1266, 13.2267, 12.8645, 11.9649, 12.6385, 11.6468, 12.3139, 14.499, 10.5704, 11.5158, 11.664, 13.0053, 15.268, 15.3052, 14.8788, 18.092, 9.91792, 13.5508, 14.1143, 12.001, 14.2982, 10.3972, 11.7169, 13.683, 11.5641, 12.0744, 13.2996, 15.5148, 14.9946, 15.9255, 11.9394, 14.3049, 11.6427, 13.3589, 13.0038, 12.0471, 12.4315, 12.5247, 11.6902, 12.2507, 11.7127, 12.4035, 13.2524, 12.1948, 13.1283, 12.1153, 11.7458, 11.7007, 11.8742, 12.7387, 13.8417, 14.1325, 15.3017, 13.2626, 13.8617, 14.4455, 14.9797, 16.0825, 10.3116, 13.77, 14.816, 9.84588, 12.3153, 12.5836, 13.0252, 12.4364, 14.5783, 14.7135, 16.414, 15.7584, 14.3775, 11.796, 13.4942, 13.9271, 11.6928, 13.3279, 12.3803, 14.4348, 9.83879, 12.8809, 12.8597, 11.8465, 12.2016, 12.9063, 11.8661, 11.091, 14.4747, 9.70454, 12.5036, 13.5068, 13.9752, 12.8593, 14.3643, 15.3937, 14.3353, 12.9306, 13.4317, 13.507, 13.0438, 11.361, 14.21, 10.2782, 11.4822, 12.5277, 12.8058, 13.0385, 15.5128, 14.872, 14.5431, 14.3876, 12.9485, 12.6047, 17.3411, 13.361, 10.878, 12.358, 13.0773, 12.537, 11.595, 12.8028, 12.9669, 15.222, 14.8317, 14.735, 14.8899, 14.173, 13.2657, 13.5549, 12.5462, 13.6091, 12.5087, 12.4631, 12.4723, 12.3569, 11.7669, 11.9699, 16.9583, 12.0898, 14.7133, 15.6587, 15.9479, 14.4676, 14.7738, 13.6583, 12.1844, 13.6858, 12.9442, 13.2601, 11.6957, 12.8957, 11.6145, 15.892, 12.344, 13.839, 14.4917, 14.8325, 15.3607, 12.8397, 13.0568, 13.714, 12.0, 12.2652, 11.7665, 12.9043, 11.9718, 11.8057, 14.1688, 12.3343, 16.2948, 13.1865, 16.3699, 12.5655, 12.9494, 13.4391, 13.2966, 13.2045, 11.6635, 12.4857, 14.017, 13.9102, 8.52542, 12.3657, 13.4806, 15.1709, 15.0487, 14.494, 18.5497, 9.58067, 12.6641, 13.1986, 13.462, 12.2192, 12.7073, 13.2443, 11.6867, 13.7675, 10.3745, 13.0096, 14.898, 15.3685, 15.4117, 16.0562, 11.9343, 12.9818, 15.2861, 13.0277, 14.1675, 11.4365, 13.3065, 11.9612, 19.8934, 3.85854, 13.0414, 12.8292, 15.9524, 14.7952, 15.1541, 14.9269, 14.5522, 13.2115, 12.6813, 14.9395, 13.4285, 13.3598, 11.97, 12.3617, 11.8308, 12.3096, 13.7876, 12.2043, 12.6974, 11.8115, 14.6297, 10.574, 11.0123, 12.2375, 13.2885, 14.7222, 15.3826, 15.0051, 15.1366, 13.9301, 11.0045, 15.4676, 15.5983, 13.4701, 11.1461, 11.9076, 13.533, 11.7775, 14.7442, 13.134, 13.3335, 13.1241, 13.3979, 12.7135, 12.4428, 12.8762, 13.1719, 11.6988, 16.0317, 14.8799, 14.9074, 12.984, 15.0261, 13.1285, 12.6233, 13.178, 12.8648, 12.7045, 11.7048, 12.8177, 12.5702, 12.6935, 45.7342];
	
	new Chart("cube-ex", {
		type: "line",
		data: {
			labels: frameNumbers,
			datasets: [
				{ label: "baseline", data: baseline_times, pointStyle:false },
				{ label: "+flattened-graph", data: optim1_times, pointStyle:false },
				{ label: "+flattened-graph +indexed_mesh", data: optim2_times, pointStyle:false },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "Performance on cube.s72" }, //show a chart title
				legend: { display: true, onClick:()=>{} }, //show legend but don't allow interacting
			},
			scales: {
				y:{
					title: { display:true, text:"frame time (ms)" },
				},
				x:{
					title: { display:true, text:"frame number" },
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<figure>
<canvas id="bar-cube-ex" style="display:block; width:100%; max-width:600px; margin:0 auto; background:#fff;"></canvas>
<script>
window.addEventListener('load', () => {
	const labels = ["baseline", "+flattened-graph", "+flattened-graph +indexed_mesh"];

	new Chart("bar-cube-ex", {
		type: "bar",
		data: {
			labels: labels,
			datasets: [
				{ label: "cube", data: [12.296374364, 12.17677451, 12.8089607] },
			]
		},
		options: {
			plugins: {
				title: { display: true, text: "Mean Performance on cube.s72" }, //show a chart title
				legend: { display: false },
			},
			scales: {
				y:{
					title: { display:true, text:"frame time (ms)" },
					min: 12,
				},
			},
			animation:false, //don't animate in the data sets
		}
	});
})
</script>
</figure>

<p>
The results for the flattened graph optimization are as expected. Since <code>sphereflake.s72</code>
is a scene with a large scene graph that's completely static, we would expect that precomputing the
flattened graph to yield a significant performance improvement. Meanwhile, since <code>cube.s72</code>
contains only a single mesh, we would not expect significant improvements from the flattened graph optimization.
</p>
<p>
However, what's surprising is that the indexed mesh optimization ended up worsening performance instead.
Perhaps this indicates that the workload was not being bottlenecked by GPU memory (which is reasonable
since my device has 64GB of memory), thus the additional overhead of binding the index buffer simply
worsens performance instead. If I had additional time, perhaps I might have tried testing on my other
laptop, which has a weaker GPU (though still 48GB of RAM, so maybe the results would still be similar).
Otherwise this might also be an indication that I did not implement indexed meshes correctly.
</p>
<!-- <h2>Feedback</h2>
<p class="placeholder">
This is the end of the structured report. Feel free to add feedback about A1 to this section.
</p> -->

</body>
</html>
